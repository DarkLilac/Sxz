<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title>Click By Chunk Demo</title>
        <script src="sxz.js"></script>
	</head>
	<body>
    <img src="sxz.png" align="left" alt="original png image" /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
    <canvas id="canvasid" width="600" height="200"></canvas>

	<script>
	    var canvas = document.getElementById('canvasid');
	    var sxz = new Sxz();
	    sxz.Load(sxz, "sxz.sxz", canvas, MouseDown);
	    var previousChunk = null;

        function MouseDown(event) {
            var x = event.pageX;
            var y = event.pageY;

            x -= sxz.Canvas.offsetLeft;
            y -= sxz.Canvas.offsetTop;

            var chunk = sxz.Container.Frames[0].GetSelected(x, y);
            if (chunk == null) {
                if (previousChunk != null) {
                    previousChunk.MouseUp();
                    previousChunk = null;
                    sxz.Render();
                }

                return;
            }

            var color = chunk.GetColor(x, y);
            chunk.MouseDown();
            window.open('http://www.w3schools.com/tags/ref_color_tryit.asp?hex=' + color.Hex().substring(1));

            if (previousChunk != null) {
                previousChunk.MouseUp();
            }

            previousChunk = chunk;
            sxz.Render();
        }
    </script>
	</body>
</html>